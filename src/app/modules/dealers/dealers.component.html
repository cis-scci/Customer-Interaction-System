<div class="wrapper" *ngIf="loader">   
  <mat-progress-spinner style="margin:0 auto;" mode="indeterminate"></mat-progress-spinner> 
</div>


<div class="container-fluid mt-2">
  <div class="table-container">
    <div class="card card-bordered fullheight-min">      
      <div class="card-body">
        
        <form class="example-form">
          <mat-form-field class="example-full-width">
            <input type="text" autocomplete="false" (keyup)="applyFilter($event.target.value)" matInput placeholder="Search">
            <mat-icon matSuffix>search</mat-icon>
          </mat-form-field>          
        </form>

      <div class="example-container mat-elevation-z8"  *ngIf= "!loader">

        <mat-table [dataSource]="dataSource" matSort>     
      

          <ng-container matColumnDef="DealershipName">
            <mat-header-cell *matHeaderCellDef > Dealership Name </mat-header-cell>
            <mat-cell *matCellDef="let row" data-label="DealershipName"> {{row.DealershipName}} <a style="color: black;cursor: pointer;" (click)="navigateToDetail(row.DealerID)"> <i class="glyphicon glyphicon-info-sign ml-2"></i> </a></mat-cell>
          </ng-container>
      

          <ng-container matColumnDef="DistributorName">
            <mat-header-cell *matHeaderCellDef > Distributor Name </mat-header-cell>
            <mat-cell *matCellDef="let row" data-label="DistributorName"> {{row.DistributorName}} </mat-cell>
          </ng-container>
      

          <ng-container matColumnDef="DistrictName">
            <mat-header-cell *matHeaderCellDef > City/District </mat-header-cell>
            <mat-cell *matCellDef="let row" data-label="city_district"> {{row.DistrictName}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="StateName">
            <mat-header-cell *matHeaderCellDef > State </mat-header-cell>
            <mat-cell *matCellDef="let row" data-label="StateName"> {{row.StateName}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="phone">
            <mat-header-cell *matHeaderCellDef > Contact Number </mat-header-cell>
            <mat-cell *matCellDef="let row" data-label="phone"> {{row.phone}} </mat-cell>
          </ng-container>

          <ng-container matColumnDef="Action">
            <mat-header-cell *matHeaderCellDef> Action </mat-header-cell>
            <mat-cell *matCellDef="let row" data-label="Action"> <a (click)="addCard(row.DealershipName,row.DealerID,row.phone,row.DeviceID)" style="cursor: pointer;color: #337ab7;">Create cart</a></mat-cell>
          </ng-container>

          <ng-container matColumnDef="Call">
            <mat-header-cell *matHeaderCellDef> Call </mat-header-cell>
            <mat-cell *matCellDef="let row" data-label="Call"> 
              
              <i style="cursor: pointer;" (click)="callInitiate(row.phone)"  class="material-icons">phone</i>
              
            </mat-cell>
          </ng-container>
          
      
          <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
          <mat-row *matRowDef="let row; columns: displayedColumns;">
          </mat-row>
        </mat-table>
      

      </div>
      <mat-paginator [pageSizeOptions]="[10, 25, 100]"></mat-paginator>

  </div>
  </div>
  </div>

</div>

<!-- Modal -->
<div class="modal in" id="exampleModalCenter" tabindex="-1" role="dialog" [style.display]="callInitiated ? 'block' : 'none'" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLongTitle">Success</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close" (click)="closeModel()">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <h3>Call Initiated Successfully !!</h3>
      </div>
      <div class="modal-footer">        
        <button type="button" class="btn btn-primary" (click)="closeModel()">Ok</button>
      </div>
    </div>
  </div>
</div>